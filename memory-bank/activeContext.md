## 現在のコンテキスト

**現在の作業焦点:**

画像処理ロジック、ZIPアーカイブ生成、およびダウンロード機能を実装しました。

**最近の変更:**

*   `server/Dockerfile`を修正して、`cors`をインストールするようにしました。
*   バックエンドに画像処理ロジックを実装しました。
*   バックエンドにZIPアーカイブ生成を実装しました。
*   フロントエンドにダウンロード機能を実装しました。

**注意:**
*   `server/src/imageProcessor.ts`は現在使用されていません。このファイルは削除される可能性があります。

**次のステップ:**

*   アプリケーションをテストします。
*   既知の問題を修正します。
*   アプリケーションをデプロイします。

**アクティブな決定と考慮事項:**

*   Dockerイメージには、fontconfigライブラリを含む、画像処理に必要なすべての依存関係を含める必要があります。
*   フロントエンドは、バックエンドAPIに画像アップロードリクエストを送信する必要があります。

**重要なパターンと設定:**

*   このプロジェクトでは、ローカル開発にDockerとDocker Composeを使用します。
*   フロントエンドはポート3000で提供されます。
*   バックエンドはポート5002で提供されます。

**学習とプロジェクトの洞察:**

*   Dockerコンテナの依存関係を解決するには、さまざまな方法を試す必要があります。
*   `npm install --force --legacy-peer-deps`を使用すると、依存関係の競合を解決できる場合があります。
*   Dockerイメージにfontconfigライブラリをインストールすると、サーバー出力の「Fontconfig error」を解決できます。
*   `exiftool-vendored`モジュールが見つからない場合は、`npm rebuild exiftool-vendored`を実行してモジュールをリビルドする必要がある場合があります。
*   `require`を使用する場合は、`import`を使用する代わりに、型定義を明示的に指定する必要がある場合があります。
*   Dockerコンテナ内でコマンドを実行するには、`docker compose up --build`を使用する必要があります。
*   `tsconfig.json`の`module`オプションを`es6`に設定し、`CMD`で`ts-node -r esm`を使用すると、ESモジュールを`ts-node`で実行できます。
